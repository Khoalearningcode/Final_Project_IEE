<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <title>YOLO Web Inference</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body{font-family:system-ui, sans-serif; max-width:760px; margin:40px auto; padding:0 12px}
    .card{border:1px solid #ddd; border-radius:12px; padding:16px}
    img{max-width:100%; height:auto; border-radius:12px; border:1px solid #eee}
    pre{background:#f8f8f8; padding:12px; border-radius:8px; overflow:auto}
    button{padding:10px 16px; border-radius:10px; border:1px solid #ddd; cursor:pointer}
  </style>
</head>
<body>
  <h1>YOLO Web Inference</h1>
  <div class="card">
    <form id="form">
      <input type="file" id="file" accept="image/*" required />
      <button type="submit">Predict</button>
    </form>
  </div>
  <div id="result" class="card" style="margin-top:16px; display:none">
    <h3>Kết quả</h3>
    <img id="pred" alt="Result" />
    <pre id="json"></pre>
  </div>

  <script>
  const form = document.getElementById('form');
  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const file = document.getElementById('file').files[0];
    if (!file) return;

    const fd = new FormData();
    fd.append('file', file);

    const res = await fetch('/predict', { method: 'POST', body: fd });
    const data = await res.json();

    const box = document.getElementById('result');
    document.getElementById('json').textContent = JSON.stringify(data, null, 2);
    document.getElementById('pred').src = data.result_image_url;
    box.style.display = 'block';
  });
  </script>
</body>
</html>
